\newcommand{\andspace}[1]{\hspace{#1}\textrm{and}\hspace{#1}}

\numberwithin{equation}{section}
\setlength{\columnsep}{.5cm}
\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{black}}

\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\inner}[1]{\langle #1 \rangle}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\spanvect}{\textnormal{span}}
\newcommand{\union}{\cup}
\newcommand{\Union}{\bigcup}

% Defines a keyword which will bold and add a word to the index.
\newcommand{\keyword}[1]{\textbf{#1}\index{#1}}

% Create a section without making the section title.
\newcommand\invisiblesection[1]{%
	\refstepcounter{section}%
	\addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}%
	\sectionmark{#1}}

% Makes a chapter with no title
\makeatletter
\newcommand{\unchapter}[1]{%
	\begingroup
	\let\@makechapterhead\@gobble % make \@makechapterhead do nothing
	\chapter{#1}
	\endgroup
}
\makeatother

%%% These are some shortcuts that are handy
\def\real{{\mathbb R}}
\def\Natural{\mathbb{N}}
\def\dx{\textnormal{dx}}
\def\dy{\textnormal{dy}}
\def\dz{\textnormal{dz}}
\def\dt{\textnormal{dt}}
\def\ds{\textnormal{ds}}
\def\dw{\textnormal{dw}}
\def\Re{\textnormal{Re}}
\def\Im{\textnormal{Im}}
\def\exp{\textnormal{exp}}
\def\interior{\textnormal{interior}}
\def\al{\alpha}
\def\del{\delta}
\def\Del{\Delta}
\def\gam{\gamma}
\def\Gam{\Gamma}
\def\Om{\Omega}
\def\ep{\varepsilon}
\def\lam{\lambda}
\def\rational{{\mathbb Q}}
\def\integer{{\mathbb Z}}
\def\Q{{\mathbb Q}}
\def\Z{{\mathbb Z}}
\def\N{{\mathbb N}}
\def\R{{\mathbb R}}
\def\grad{\nabla}
\def\C{\mathcal C}
\def\P{\mathcal P}
\def\T{\mathcal T}
\def\I{\mathcal I}
\def\intersect{\cap}
\def\Intersect{\bigcap}


%%% This defines the solution environment for you to write your solutions
\newenvironment{soln}
{\let\oldqedsymbol=\qedsymbol
	\renewcommand{\qedsymbol}{$ $}
	\begin{proof}[\bfseries\upshape \color{blue}Derivation]\color{blue}}
	{\end{proof}
	\renewcommand{\qedsymbol}{\oldqedsymbol}}

\newenvironment{Deletion}
{\let\oldqedsymbol=\qedsymbol
	\renewcommand{\qedsymbol}{$ $}
	\begin{proof}[\bfseries\upshape \color{red}Deletion]\color{red}}
	{\end{proof}
	\renewcommand{\qedsymbol}{\oldqedsymbol}}


%Definition
\definecolor{mygray}{RGB}{240,240,240}
\definecolor{mybordergray}{RGB}{200,200,200}

\newcounter{defn}[section]
\setcounter{defn}{0}
\renewcommand{\thedefn}{\arabic{chapter}.\arabic{section}.\arabic{defn}}

\newenvironment{defn}[2][]{
	\refstepcounter{defn}
	\ifstrempty{#1}{
		\mdfsetup{
			frametitle={
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=mybordergray]
				{\strut Definition~\thedefn};
			}
		}
	}{
		\mdfsetup{
			frametitle={
				\tikz[baseline=(current bounding box.east),outer sep=1pt]
				\node[anchor=east,rectangle,fill=mybordergray]
				{\strut Definition~\thedefn:~#1};
			}
		}
	}
	\mdfsetup{
		innertopmargin=10pt,
		linecolor=mybordergray,
		linewidth=2pt,
		topline=true,
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax,
		backgroundcolor=mygray,
	}
	\begin{mdframed}[nobreak=true]\relax
		\label{#2}
	}{
	\end{mdframed}
}
	
%Fancy Box
\newcounter{fancybox}[section]
\setcounter{fancybox}{0}
\renewcommand{\thefancybox}{\arabic{chapter}.\arabic{section}.\arabic{fancybox}}

% Customize the colors here
\definecolor{myfancyboxbg}{RGB}{255, 235, 205}  % Light orange background
\definecolor{myfancyboxborder}{RGB}{255, 165, 0}  % Orange border

\newenvironment{fancybox}[2][]{%
	\refstepcounter{fancybox}%
	\ifstrempty{#1}{%
		\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=myfancyboxborder]
				{\strut ~\thefancybox};}
		}
	}{%
		\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=myfancyboxborder]
				{\strut ~\thefancybox:~#1};}
		}
	}%
	\mdfsetup{%
		innertopmargin=10pt,
		linecolor=myfancyboxborder,
		linewidth=2pt,
		topline=true,
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[backgroundcolor=myfancyboxbg]\relax%
		\label{#2}
	}{
	\end{mdframed}
}

% define interesting note
\newenvironment{note}{
	\begin{tcolorbox}[
		colback=green!10,  % Very light green background color of the box
		colframe=green!50,  % Border color of the box
		arc=0pt,  % Adjust the corner radius of the box
		boxrule=1pt,  % Border thickness
		title={\faLightbulb\ Note},  % The lightbulb icon and title
		fonttitle=\bfseries,  % Font style for the title
		coltitle=blue!50!black,  % Color for the title text
		colbacktitle=yellow!20,  % Background color for the title
		attach title to upper={\par},
		boxsep=0pt,  % Adjust the space between the content and the box
		]
	}{
	\end{tcolorbox}
}

% define interesting note
\newenvironment{caution}{
	\begin{tcolorbox}[
		colback=yellow!10,  % Very light yellow background color of the box
		colframe=yellow!70,  % Border color of the box
		arc=0pt,  % Adjust the corner radius of the box
		boxrule=1pt,  % Border thickness
		title={\faExclamationTriangle\ Caution},  % The lightbulb icon and title
		fonttitle=\bfseries,  % Font style for the title
		coltitle=blue!50!black,  % Color for the title text
		colbacktitle=yellow!20,  % Background color for the title
		attach title to upper={\par},
		boxsep=0pt,  % Adjust the space between the content and the box
		]
	}{
	\end{tcolorbox}
}

\newcommand{\unfinished}{%
	\par\noindent%
	\setlength{\fboxsep}{10pt} % Adjust the padding
	\fcolorbox{red}{red!20}{%
		\begin{minipage}{\dimexpr\linewidth-2\fboxsep}%
			\vspace{5pt} % Adjust the vertical spacing
			\centering
			\textcolor{red}{\textbf{\faExclamation\ Section in Progress\ \faExclamation}}
			\vspace{5pt} % Adjust the vertical spacing
		\end{minipage}%
	}%
	\par
}